#!/bin/bash

declare -A DATA=( ["1 2 3 4 5 6 7 8 9 10"]="5.5" ["-2345.67 8765.43 -1234.56 5678.91 -9876.54 3456.78 -7654.32 1987.65 -4321.09 6543.21"]="99.98" ["9123.45 -8234.56 7345.67 -6456.78 5567.89 -4678.90 3789.01 -2890.12 1991.23 -1092.34"]="446.46" ["-1598.76 2679.87 -3760.98 4851.09 -5942.10 6033.21 -7124.32 8215.43 -9306.54 1497.65"]="-445.55" ["7823.12 -6914.23 5005.34 -4196.45 3287.56 -2378.67 1469.78 -560.89 -348.00 1239.11"]="442.66" ["-8456.78 9567.89 -6678.90 7789.01 -4890.12 5901.23 -3012.34 4123.45 -1234.56 2345.67"]="545.46" ["1234.56 -2345.67 3456.78 -4567.89 5678.90 -6789.01 7890.12 -8901.23 9012.34 -123.45"]="454.55" ["-9123.45 8234.56 -7345.67 6456.78 -5567.89 4678.90 -3789.01 2890.12 -1991.23 1092.34"]="-446.46" ["4567.89 -5678.90 6789.01 -7890.12 8901.23 -9012.34 123.45 -234.56 345.67 -456.78"]="-254.54" ["-7823.12 6914.23 -5005.34 4196.45 -3287.56 2378.67 -1469.78 560.89 348.00 -1239.11"]="-442.66" ["1598.76 -2679.87 3760.98 -4851.09 5942.10 -6033.21 7124.32 -8215.43 9306.54 -1497.65"]="445.55")

for item in "${!DATA[@]}";
do
    echo "INPUT: \"$item\". OUTPUT MUST BE: \"${DATA[$item]}\""
    RESULT="$(echo "${item}" | ./bin/exercise1 | sed -e 's/^[[:space:]]*//' -e 's/[[:space:]]*$//')"
    EXPECTED="${DATA[$item]}"

    ERROR=$(echo "$RESULT"'-'"($EXPECTED)" | bc -l)
    if [ "$(echo "${ERROR#-}"'<'0.01 | bc -l)" -ne 0 ]; then
        echo "Test Success"
    else
        echo "Test fail. Expected: \"$EXPECTED\". Actual: \"$RESULT\"."
        exit 1
    fi
done

exit 0